<ModalStack dismissEnabled="true" class="modal-root">
  <GridLayout rows="*" columns="*">
    <StackLayout row="0" col="0" class="backdrop" (tap)="close()"></StackLayout>

    <GridLayout row="0" col="0" rows="auto,auto" class="modal-card">
      <GridLayout row="0" columns="*" class="header header-fixed">
        <Label col="0" text="Microsoft Authenticator" class="title modal-title-text"></Label>
      </GridLayout>

      <StackLayout row="1" class="content" [formGroup]="form">
        <Label text="Enter the verification code" class="subtitle"></Label>

        <FlexboxLayout class="digits-row">
          <TextField
            *ngFor="let i of digitIndexes"
            [text]="codeDigits[i]"
            hint=""
            keyboardType="number"
            maxLength="1"
            autocorrect="false"
            autocapitalizationType="none"
            textAlignment="center"
            class="code-digit"
            (loaded)="onDigitLoaded(i, $event)"
            (textChange)="onDigitTextChange(i, $event)"
            (returnPress)="onDigitReturn(i)">
          </TextField>
        </FlexboxLayout>

        <Label
          class="required-label"
          text="{{ codeTouched && codeValue.length < 6 ? 'Code is required.' : '' }}">
        </Label>

        <GridLayout columns="*,12,*" class="actions-row">
          <Button col="0" text="Cancel" class="btn-secondary" (tap)="close()"></Button>
          <Button col="2" text="Verify" class="btn-primary" (tap)="verify()"></Button>
        </GridLayout>
      </StackLayout>
    </GridLayout>
  </GridLayout>
</ModalStack>
