<ActionBar class="action-bar" title="Summary">
  <ActionItem *ngIf="!isSyncing" ios.position="right" ios.systemIcon="13" (tap)="onSummaryDirectRefresh()"></ActionItem>
  <ActionItem *ngIf="isSyncing" ios.position="right">
    <ActivityIndicator [busy]="true" width="20" height="20"></ActivityIndicator>
  </ActionItem>
</ActionBar>

<GridLayout rows="auto, auto" columns="*" class="container">
  <StackLayout row="0">
    <Label
      [text]="'Next Payment (' + (summaryAmount.startDate | date) + ' - ' + (summaryAmount.endDate | date) + ')'"
      class="section-title"></Label>

    <GridLayout rows="auto, auto, auto, auto, auto, auto" columns="*, auto" class="card">
      <Label row="0" col="0" text="Gross Amount"></Label>
      <Label row="0" col="1" [text]="summaryAmount.gross | currency" textAlignment="right"></Label>

      <Label row="1" col="0" text="Meter Rental Amount" class="line"></Label>
      <Label row="1" col="1" [text]="formatMinus(summaryAmount.meterRent) | currency" class="line" textAlignment="right"></Label>

      <Label row="2" col="0" text="Billing Platform" class="line"></Label>
      <Label row="2" col="1" [text]="formatMinus(summaryAmount.billingPlatform) | currency" class="line" textAlignment="right"></Label>

      <Label row="3" col="0" text="Car Rental Amount" class="line"></Label>
      <Label row="3" col="1" [text]="formatMinus(summaryAmount.carRentalAmount) | currency" class="line" textAlignment="right"></Label>

      <Label row="4" col="0" text="Tool Rental Amount" class="line"></Label>
      <Label row="4" col="1" [text]="formatMinus(summaryAmount.toolRentalAmount) | currency" class="line" textAlignment="right"></Label>

      <Label row="5" col="0" text="Net Amount" class="bold line"></Label>
      <Label row="5" col="1" [text]="summaryAmount.net | currency" class="bold line" textAlignment="right"></Label>
    </GridLayout>
  </StackLayout>

  <StackLayout row="1" class="week-section">
    <Label text="Current Week Average" class="section-title"></Label>

    <StackLayout class="card">
      <GridLayout *ngFor="let totalPerDay of weekAverage.totalsPerDay" columns="*, auto" class="">
        <Label col="0" [text]="totalPerDay.date | date: 'EEEE'"></Label>
        <Label col="1" [text]="totalPerDay.total | currency" textAlignment="right"></Label>
      </GridLayout>

      <GridLayout columns="*, auto" class="line-row">
        <Label col="0" text="Daily Average" class="bold"></Label>
        <Label col="1" [text]="weekAverage.dailyAverage | currency" class="bold" textAlignment="right"></Label>
      </GridLayout>

      <GridLayout columns="*, auto" class="line-row">
        <Label col="0" text="Today's Avg/hr (7am - 6pm)" class="bold"></Label>
        <Label col="1" [text]="weekAverage.todayHourlyAverage | currency" class="bold" textAlignment="right"></Label>
      </GridLayout>
    </StackLayout>
  </StackLayout>
</GridLayout>
